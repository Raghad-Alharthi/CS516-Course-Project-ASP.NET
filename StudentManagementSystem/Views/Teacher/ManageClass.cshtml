@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Manage Class";
}

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert" style="font-family: Funnel Display;">
        @TempData["SuccessMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<div class="container my-5">
    <div class="card mb-4" style="border-radius: 12px; padding: 24px; background-color: #F1EFEC; box-shadow: 0 0 15px rgba(0,0,0,0.05);">
        <h3 style="font-family: Funnel Display; color: #123458; font-weight: 800;">
            Manage Class: @ViewBag.Class.ClassName
        </h3>

        @if (Model.Count == 0)
        {
            <p class="mt-3" style="font-family: Funnel Display; color: #123458;">No past or current lectures available.</p>
        }
        else
        {
            <table class="table table-bordered mt-4" style="background-color: #f8f7f6;">
                <thead style="background-color: #123458; color: #f8f7f6;">
                    <tr>
                        <th style="font-family: Funnel Display; background-color: #123458; color: #f8f7f6;">Lecture Date</th>
                        <th style="font-family: Funnel Display; background-color: #123458; color: #f8f7f6;">Time</th>
                        <th style="font-family: Funnel Display; background-color: #123458; color: #f8f7f6;">Actions</th>
                        <th style="font-family: Funnel Display; background-color: #123458; color: #f8f7f6;">Excuses</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var lecture in Model)
                    {
                        <tr>
                            <td style="background-color: #f8f7f6; font-family: Funnel Display; color: #123458;">
                                @lecture.LectureDateTime.ToString("yyyy-MM-dd")
                            </td>
                            <td style="background-color: #f8f7f6; font-family: Funnel Display; color: #123458;">
                                @lecture.LectureDateTime.ToString("hh:mm tt")
                            </td>
                            <td style="background-color: #f8f7f6;">
                                <a href="/Teacher/EditAttendance?lectureId=@lecture.LectureID"
                                   class="btn btn-success btn-sm"
                                   style="font-family: Funnel Display;">
                                    Edit Attendance
                                </a>
                            </td>
                            <td style="background-color: #f8f7f6;">
                                <a href="/Teacher/SickLeaveRequests?lectureId=@lecture.LectureID"
                                    class="btn btn-info btn-sm"
                                    style="font-family: Funnel Display;">
                                    View Excuses
                                </a>

                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </div>
</div>
